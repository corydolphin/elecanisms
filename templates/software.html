{% extends "base.html" %}
{% block maincontent %}
<div class="row">

    <!-- Main Blog Content -->
    <div class="large-10 columns" role="content">

      <article>

        <h3><a href="#">System Overview</a></h3>
        <div class="row">
          <div class="large-6 columns">
            <p>
              There were two main componenets of software for this project: firmware executed on a PIC microcontroller, and control code executed on the mounted laptop.
            </p>
        <h4><a href="#">Firmware</a></h4>
            <p>
              On the PIC, we designed a USB service to receive motor commands over USB Control Transfer. 
            </p>

        <h4><a href="#">Host Control</a></h4>
            <p>
              On a standard laptop, the main control system was implemented. The PC read approximately 200,000 3d points in a point cloud data stream from the Kinect. From this point cloud, we removed all elements outside of a bounding box in front of the robot. We then computed the average depth of all points within this bounding box and compared it to a target distance in order to determine our translational error from our goal following distance. 
            </p>
            <p>
              From these errors, we used simple proportional control with a saturating function to make the robot correct its course automatically. 
            </p>

            <pre><code data-language="python">
def get_speed(self, transErr, rotErr):
        # proportional control
        linVel = -100000*transErr
        angVel = -100000*rotErr

        # saturate
        linVel = max(min(linVel, 32767), -32767)
        angVel = max(min(angVel, 32767), -32767)

        # dead zone
        if abs(transErr) < .1:
                linVel = 0
        if abs(rotErr) < .1:
                angVel = 0

        return linVel, angVel
            </code></pre>
         </div>
          <div class="large-6 columns">
            <img src="./static/img/image04.png">
          </div>
        </div>
      </article>
    </div>
    <!-- End Main Content -->
  </div>

{% endblock %}